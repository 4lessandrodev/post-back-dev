<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Document</title>
	</head>

	<body>
		<div id="form" style="display: flex;width: 100%;">
			<input type="text" name="method" id="method" value="GET">
			<input type="text" name="url" id="url" value="https://postback-4dev.onrender.com/info/request" style="display: flex;width: 100%;">
			<input type="submit" value="enviar" id="submit">
		</div>
	</body>
	<script>
		const btn = document.getElementById("submit");
		const url = document.getElementById("url");
		const method = document.getElementById("method");
		btn.addEventListener("click", async (e) => {
			e.preventDefault();
			try {
	
				const result = await fetch(url.value, {
					method: method.value,
					headers:{
						"Content-Type": "application/json",
						"withCredentials": true,
						"Accept": "application/json"
					},
					credentials: "include",
					mode:"cors"
				});

				const payload = await result.json();
				console.log(payload);
				el.innerHTML = `<div>${JSON.stringify(payload, null, 2)}</div>`
			} catch (error) {
				console.log(error);
				alert(error.message);
			}
		}) 
	</script>

</html>
